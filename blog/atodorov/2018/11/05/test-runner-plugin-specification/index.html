<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Kiwi TCMS - Test runner plugin specification</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
    


        <meta name="description" content="Happy Monday testers! Kiwi TCMS needs your help! We are looking for developers who wish to create plugins for popular test runners that..." >

        <meta name="author" content="Alexander Todorov">

        <meta name="tags" content="plugins" >
        <meta name="twitter:site" content="@KiwiTCMS">
        <meta name="twitter:title" content="Test runner plugin specification">
            <meta name="twitter:description" content="Happy Monday testers! Kiwi TCMS needs your help! We are looking for developers who wish to create plugins for popular test runners that...">
        <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:image" content="https://kiwitcms.org/theme/images/twitter_card.png">

        <meta property="og:site_name" content="Kiwi TCMS">
        <meta property="og:type" content="article" />
            <meta property="article:author" content="https://kiwitcms.org/blog/atodorov/" />
        <meta property="og:url" content="https://kiwitcms.org/blog/atodorov/2018/11/05/test-runner-plugin-specification/" />
        <meta property="og:title" content="Test runner plugin specification" />
        <meta property="article:published_time" content="2018-11-05 16:05:00+02:00">
            <meta property="og:description" content="Happy Monday testers! Kiwi TCMS needs your help! We are looking for developers who wish to create plugins for popular test runners that...">

            <meta property="og:image" content="https://kiwitcms.org/theme/images/og_image.png">
        <!-- Custom Styles -->
        <link href="/theme/style/style.css" rel="stylesheet">
        <link href="/theme/style/responsive-1440.css" rel="stylesheet">
        <link href="/theme/style/responsive-1024.css" rel="stylesheet">
        <link href="/theme/style/responsive-768.css" rel="stylesheet">
        <link href="/theme/style/responsive-micro.css" rel="stylesheet">
        <link href="/theme/style/github.css" rel="stylesheet">

        <script defer data-domain="kiwitcms.org" src="https://plausible.io/js/script.js"></script>

        <script
            id="fsc-api"
            src="https://d1f8f9xcsvx3ha.cloudfront.net/sbl/0.8.5/fastspring-builder.min.js"
            type="text/javascript"
            data-storefront="mrsenko.onfastspring.com/popup-kiwitcms">
        </script>
    </head>
    <body class="">

        <nav id="main-nav">
            <a href="/" style="display:inherit;">
                <img src="/theme/images/Kiwi-TCMS-logo-header.svg" alt="Kiwi TCMS Logo">
            </a>
            <i class="las la-bars" title="Open menu" onclick="toggle('hidden-menu', 'visible')" style="align-self: center;"></i>
            <ul class="hidden-menu" id="hidden-menu">
                <a href="/">
                    <img src="/theme/images/Kiwi-TCMS-logo-header.svg" alt="Kiwi TCMS Logo">
                </a>
                <i class="las la-times" title="Close" onclick="toggle('hidden-menu', 'visible')"></i>
<li>
    <a href="/features/" >Features</a>
</li>
<li>
    <a href="http://kiwitcms.readthedocs.io"">Documentation</a>
</li>
<li>
    <a href="/community/" >Community</a>
</li>
<li>
    <a href="/support/" >Support</a>
</li>
<li>
    <a href="/blog/" class="active">Blog</a>
</li>
<li>
    <a href="/team/" >Team</a>
</li>            </ul>

            <ul>
<li>
    <a href="/features/" >Features</a>
</li>
<li>
    <a href="http://kiwitcms.readthedocs.io"">Documentation</a>
</li>
<li>
    <a href="/community/" >Community</a>
</li>
<li>
    <a href="/support/" >Support</a>
</li>
<li>
    <a href="/blog/" class="active">Blog</a>
</li>
<li>
    <a href="/team/" >Team</a>
</li>                <li>
                    <div class="drop-btn" id="nav-drop"
                        onmouseenter="toggle('nav-drop','drop-down');"
                        onmouseleave="toggle('nav-drop','drop-down');"
                    >
                        <div class="btn" icon>Get Started <i></i></div>
                        <!-- WARNING: this menu needs to be copied everywhere where we have this
                            button b/c Pelican doesn't support includes from HTML content files:
                            https://github.com/getpelican/pelican/issues/2783
                        -->
                        <div class="drop-cnt">
                            <a href="https://public.tenant.kiwitcms.org">Explore latest version</a>
                            <a href="/#subscriptions">Explore subscriptions</a>
                            <a href="https://kiwitcms.readthedocs.io/en/latest/installing_docker.html">Run as Docker container</a>
                            <a href="https://github.com/marketplace/kiwi-tcms/">Integration with GitHub</a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- content -->
    <section id="blog-article">
        <h1 class="top-header">Test runner plugin specification</h1>

        <p class="post-meta">
            Posted by
                <a href="https://kiwitcms.org/blog/atodorov/">Alexander Todorov</a>
            on Mon 05 November 2018
                under
                    <a href="https://kiwitcms.org/blog/tags/plugins/">plugins</a>
        </p>

        <article class="content">
            <p>Happy Monday testers! Kiwi TCMS needs your help! We are looking for developers who
wish to create plugins for popular test runners that will record test results
in Kiwi TCMS! Initially we are looking for plugins for Python's unittest,
<a href="https://docs.djangoproject.com/en/2.1/topics/testing/advanced/#using-different-testing-frameworks">Django</a>
and <a href="https://junit.org/junit4/plugins.html">JUnit</a>!</p>
<h2>What is a test runner?</h2>
<p>When working with automated testing you have several components:</p>
<ul>
<li>A test module (or test script), e.g. <code>test_models.py</code> which contains
  tests for your software;</li>
<li>A test framework, e.g. Python nose, which provides the structure
  for test classes and methods and assert methods to use;</li>
<li>A test runner, which knows how to discover your test scripts, load them,
  execute the testing scenarios inside of them and report the results.</li>
</ul>
<p>Very often all of the components above live together inside the testing framework
but don't need to. For example the standard <code>unittest</code> module in Python
provides a test runner but there are also <code>nose</code> and <code>py.test</code> and Django provides
its own test runner that knows how to work with the database.</p>
<h2>Workflow organization</h2>
<p>Once you agree to writing a plugin we are going to create a separate GitHub
repository where you will be granted write privileges making you an independent
contributor to the Kiwi TCMS project!</p>
<p>Design and architecture of the plugin is up to you, following the practices
established by the testing framework in question. You will also have to create
a test suite for your plugin based on the specification below.</p>
<p>You are expected to use
<a href="https://public.tenant.kiwitcms.org/login/github-app/">public.tenant.kiwitcms.org</a> while working on the
plugin and afterwards. This is known as eating your own dog food!</p>
<p>For Python we provide the <code>tcms-api</code> module which already takes care of the
communications layer. For other languages you will have to create this layer or
depend on other open source libraries that provide a XML-RPC or JSON-RPC
client!</p>
<p>You can use
<a href="https://gist.github.com/atodorov/f5aed028b6f254d97bcaf93453abe8d2">this gist</a>
for inspiration!</p>
<h2>Behavior Specification</h2>
<p><em>Please use the comments section to discuss unclear behavior and missing scenarios!</em></p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">configuration</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="nx">exists</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="nx">tcms</span><span class="p">.</span><span class="nx">conf</span><span class="w"> </span><span class="nx">exists</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">initializes</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">log</span><span class="w"> </span><span class="nx">an</span><span class="w"> </span><span class="nx">info</span><span class="w"> </span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">read</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="k">and</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">configure</span><span class="w"> </span><span class="nx">TCMS_API_URL</span><span class="p">,</span><span class="w"> </span><span class="nx">TCMS_USERNAME</span><span class="p">,</span><span class="w"> </span><span class="nx">TCMS_PASSWORD</span>
<span class="w">          </span><span class="nx">variables</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">respective</span><span class="w"> </span><span class="nx">values</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">ENVIRONMENT</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">configuration</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="nx">tcms</span><span class="p">.</span><span class="nx">conf</span><span class="w"> </span><span class="nx">does</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">exists</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">initializes</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">read</span><span class="w"> </span><span class="nx">configuration</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">environment</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">configure</span>
<span class="w">          </span><span class="nx">the</span><span class="w"> </span><span class="nx">following</span><span class="w"> </span><span class="nx">variables</span><span class="o">/</span><span class="kd">class</span><span class="w"> </span><span class="nx">members</span><span class="p">:</span>
<span class="w">          </span><span class="nx">TCMS_API_URL</span><span class="p">,</span><span class="w"> </span><span class="nx">TCMS_USERNAME</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">TCMS_PASSWORD</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">exit</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">TCMS_API_URL</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_API_URL</span><span class="w"> </span><span class="nx">variable</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">empty</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">initializes</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">log</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">exit</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="nx">depending</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span><span class="w"> </span><span class="nx">framework</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">exist</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="mi">1</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">exit</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">TCMS_USERNAME</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_USERNAME</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">empty</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">initializes</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">log</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">exit</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="nx">depending</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span><span class="w"> </span><span class="nx">framework</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">exist</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="mi">1</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">exit</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">TCMS_PASSWORD</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_PASSWORD</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">empty</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">initializes</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">log</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">exit</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="nx">depending</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span><span class="w"> </span><span class="nx">framework</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">exist</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="mi">1</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">re</span><span class="o">-</span><span class="nx">use</span><span class="w"> </span><span class="nx">existing</span><span class="w"> </span><span class="nx">TestPlan</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_RUN_ID</span><span class="w"> </span><span class="nx">environment</span><span class="w"> </span><span class="nx">variable</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">empty</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">initializes</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w">  </span><span class="nx">this</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">Current_TestRun</span><span class="w"> </span><span class="nx">record</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="k">is</span>
<span class="w">           </span><span class="nx">going</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">execution</span><span class="w"> </span><span class="nx">results</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="nx">Current_TestPlan</span><span class="w"> </span><span class="nx">document</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span>
<span class="w">           </span><span class="nx">search</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">cases</span><span class="w"> </span><span class="nx">becomes</span><span class="w"> </span><span class="nx">Current_TestRun</span><span class="p">.</span><span class="nx">plan</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">TestPlan</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nx">TestRun</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">TCMS_RUN_ID</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_RUN_ID</span><span class="w"> </span><span class="nx">environment</span><span class="w"> </span><span class="nx">variable</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">empty</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">TestPlan</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">Kiwi</span><span class="w"> </span><span class="nx">TCMS</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">attributes</span><span class="p">:</span>
<span class="w">        </span><span class="nx">name</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">Automated</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">plan</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="err">&#39;</span>
<span class="w">        </span><span class="nx">product</span><span class="p">=</span><span class="err">&#39;</span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="err">&#39;</span>
<span class="w">        </span><span class="nx">product_version</span><span class="p">=</span><span class="err">&#39;</span><span class="o">%</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span><span class="err">&#39;</span>
<span class="w">        </span><span class="k">type</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">Unit</span><span class="err">&#39;</span>
<span class="w">    </span><span class="nx">WHERE</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">placeholder</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">TCMS_PRODUCT</span><span class="o">==</span><span class="nx">TRAVIS_REPO_SLUG</span><span class="o">==</span><span class="nx">JOB_NAME</span>
<span class="w">           </span><span class="o">%</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">placeholder</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">TCMS_PRODUCT_VERSION</span><span class="o">==</span><span class="nx">TRAVIS_COMMIT</span><span class="o">==</span><span class="nx">TRAVIS_PULL_REQUEST_SHA</span><span class="o">==</span><span class="nx">GIT_COMMIT</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">crate</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">TestRun</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">Kiwi</span><span class="w"> </span><span class="nx">TCMS</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">attributes</span><span class="p">:</span>
<span class="w">        </span><span class="nx">summary</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">Automated</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="o">...</span><span class="p">.</span><span class="err">&#39;</span>
<span class="w">        </span><span class="nx">plan</span><span class="p">=</span><span class="nx">Current</span><span class="w"> </span><span class="nx">TestPlan</span>
<span class="w">        </span><span class="nx">build</span><span class="p">=</span><span class="err">&#39;</span><span class="o">%</span><span class="p">(</span><span class="nx">build</span><span class="p">)</span><span class="err">&#39;</span>
<span class="w">        </span><span class="nx">manager</span><span class="p">=</span><span class="nx">TCMS_USERNAME</span>
<span class="w">    </span><span class="nx">WHERE</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">build</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">placeholder</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">TCMS_BUILD</span><span class="o">==</span><span class="nx">TRAVIS_BUILD_NUMBER</span><span class="o">==</span><span class="nx">BUILD_NUMBER</span>
<span class="w">    </span><span class="nx">Environment</span><span class="w"> </span><span class="nx">variables</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">specified</span><span class="w"> </span><span class="k">in</span><span class="p">:</span>
<span class="w">    </span><span class="nx">https</span><span class="p">:</span><span class="c1">//docs.travis-ci.com/user/environment-variables#default-environment-variables</span>
<span class="w">    </span><span class="nx">https</span><span class="p">:</span><span class="c1">//wiki.jenkins.io/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-belowJenkinsSetEnvironmentVariables</span>

<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="nx">duplicate</span><span class="w"> </span><span class="nx">Product</span><span class="p">,</span><span class="w"> </span><span class="nx">Version</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nx">Build</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">they</span><span class="w"> </span><span class="nx">already</span><span class="w"> </span><span class="nx">exist</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_RUN_ID</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="nx">exists</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span><span class="w"> </span><span class="nx">exists</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">build</span><span class="p">)</span><span class="w"> </span><span class="nx">exists</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">tries</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="kt">auto</span><span class="o">-</span><span class="nx">create</span><span class="w"> </span><span class="nx">TestPlan</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">TestRun</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">re</span><span class="o">-</span><span class="nx">use</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">),</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">build</span><span class="p">)</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">database</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">try</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="kt">auto</span><span class="o">-</span><span class="nx">create</span><span class="w"> </span><span class="nx">them</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Will</span><span class="w"> </span><span class="kt">auto</span><span class="o">-</span><span class="nx">create</span><span class="w"> </span><span class="nx">Product</span><span class="p">,</span><span class="w"> </span><span class="nx">Version</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nx">Build</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">they</span><span class="w"> </span><span class="nx">don</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">TCMS_RUN_ID</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">configured</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span><span class="w"> </span><span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span><span class="w"> </span><span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">build</span><span class="p">)</span><span class="w"> </span><span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">tries</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="kt">auto</span><span class="o">-</span><span class="nx">create</span><span class="w"> </span><span class="nx">TestPlan</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">TestRun</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">product</span><span class="p">),</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">version</span><span class="p">)</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="o">%</span><span class="p">(</span><span class="nx">build</span><span class="p">)</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">created</span><span class="w"> </span><span class="nx">automatically</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">added</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">TestPlan</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">we</span><span class="w"> </span><span class="nx">have</span><span class="w"> </span><span class="nx">good</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">configuration</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">loops</span><span class="w"> </span><span class="nx">over</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">tests</span><span class="w"> </span><span class="nx">emitted</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="nx">Current_TestPlan</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">TestCase</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">same</span><span class="w"> </span><span class="nx">name</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">Current_TestPlan</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">added</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Current_TestPlan</span>
<span class="w">    </span><span class="nx">hint</span><span class="p">:</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">probably</span><span class="w"> </span><span class="nx">best</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">end</span><span class="p">!</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">added</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">TestRun</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">we</span><span class="w"> </span><span class="nx">have</span><span class="w"> </span><span class="nx">good</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">configuration</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">loops</span><span class="w"> </span><span class="nx">over</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">tests</span><span class="w"> </span><span class="nx">emitted</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="nx">Current_TestRun</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">TestCaseRun</span><span class="w"> </span><span class="nx">object</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="nx">matches</span>
<span class="w">          </span><span class="nx">the</span><span class="w"> </span><span class="nx">current</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">name</span>
<span class="w">    </span><span class="nx">hint</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nx">Current_TestCase</span><span class="w"> </span><span class="nx">object</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">previous</span><span class="w"> </span><span class="nx">scenario</span><span class="p">,</span><span class="w"> </span><span class="nx">depending</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">implementation</span><span class="p">)</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">such</span><span class="w"> </span><span class="nx">TestCaseRun</span><span class="w"> </span><span class="nx">doesn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">exist</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">Current_TestRun</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">added</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Current_TestRun</span>
<span class="w">    </span><span class="nx">hint</span><span class="p">:</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">probably</span><span class="w"> </span><span class="nx">best</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">end</span><span class="p">!</span>


<span class="w">    </span><span class="nx">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nx">Current_TestRun</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">updated</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">results</span>
<span class="w">    </span><span class="nx">GIVEN</span><span class="p">:</span><span class="w"> </span><span class="nx">we</span><span class="w"> </span><span class="nx">have</span><span class="w"> </span><span class="nx">good</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">configuration</span>
<span class="w">    </span><span class="nx">WHEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">loops</span><span class="w"> </span><span class="nx">over</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">tests</span><span class="w"> </span><span class="nx">emitted</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">plugin</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="nx">Current_TestRun</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">TestCaseRun</span><span class="w"> </span><span class="nx">object</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="nx">matches</span>
<span class="w">          </span><span class="nx">the</span><span class="w"> </span><span class="nx">current</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">name</span>
<span class="w">    </span><span class="nx">hint</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="k">or</span><span class="w"> </span><span class="nx">Current_TestCase</span><span class="w"> </span><span class="nx">object</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">previous</span><span class="w"> </span><span class="nx">scenario</span><span class="p">,</span><span class="w"> </span><span class="nx">depending</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">implementation</span><span class="p">)</span>
<span class="w">    </span><span class="nx">AND</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">TestCaseRun</span><span class="w"> </span><span class="nx">object</span><span class="w"> </span><span class="nx">exists</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">Current_TestRun</span>
<span class="w">    </span><span class="nx">THEN</span><span class="p">:</span><span class="w"> </span><span class="nx">its</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">updated</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">execution</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="nx">coming</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">runner</span>
<span class="w">    </span><span class="nx">hint</span><span class="p">:</span><span class="w"> </span><span class="nx">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">probably</span><span class="w"> </span><span class="nx">best</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">process</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">unit</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">end</span><span class="p">!</span>
</code></pre></div>

<p>Happy testing!</p>
        </article>
    </section>

    <section class="after-content">
        <!-- Social Sharing Buttons -->
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a8aeaec2954eb1b"></script>
        <div class="addthis_inline_share_toolbox"></div>
    </section>

    <section class="after-content">
        <div id="disqus_thread"></div>
        <script>
            var disqus_config = function () {
                this.page.url = 'https://kiwitcms.org/blog/atodorov/2018/11/05/test-runner-plugin-specification/';
                this.page.identifier = 'blog/atodorov/2018/11/05/test-runner-plugin-specification/';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://kiwitcms.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the comments</noscript>
    </section>

        <footer>
            <img src="/theme/images/Kiwi-TCMS-logo-footer.svg" alt="">
            <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=7386a67a-a689-40df-a268-b03ada69e169" alt="">
            <div class="legal">
                <p>Kiwi TCMS is collecting donations via <a href="https://opencollective.com/kiwitcms">Open Collective</a>.</p>
                <p>Except where otherwise noted, content on this site is licensed under a
                    <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license.</a>
                </p>
                <p>
                    <a href="/legal/">Legal</a> |
                    <a href="/privacy/">Privacy</a> |
                    <a href="/terms/">Terms</a></p>
            </div>
            <div class="footer-block fl-gh">
                <i></i>
                <h3>Contribute</h3>
                <a href="https://github.com/kiwitcms/Kiwi">/kiwitcms</a>
            </div>

            <div class="footer-block fl-tw">
                <i></i>
                <h3>Follow</h3>
                <a href="https://twitter.com/KiwiTCMS">@KiwiTCMS</a>
            </div>
            <div class="footer-block fl-yt">
                <i></i>
                <h3>Watch</h3>
                <a href="https://www.youtube.com/channel/UCC0KsZRFkF8nhPnES8G-KYw/videos">Kiwi TCMS</a>
            </div>
            <div class="footer-block fl-fb">
                <i></i>
                <h3>Join</h3>
                <a href="https://www.reddit.com/r/KiwiTCMS/">r/KiwiTCMS</a>
            </div>

            <div class="footer-block mail">
                <i></i>
                <h3>Join our newsletter.</h3>
                <p>Project news only, GDPR compliant.</p>
                <a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581" class="btn ghost-btn">Sign me up</a>
            </div>
        </footer>

        <script type="text/javascript" src="/theme/scripts/toggle.js"></script>


    </body>
</html>