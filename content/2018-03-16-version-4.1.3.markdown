Title: Kiwi TCMS 4.1.3
headline: Django 2.0.3, bug-fix and enhancement update
date: 2018-03-16 10:45
comments: true


We're happy to announce Kiwi TCMS version 4.1.3!
This is a bug-fix and enhancement update which upgrades to the latest Django
version, provides easier way for Docker administrators to override SSL certificates
and access httpd log files and resolves several issues. This release also includes
lots of internal code refactoring which removes code duplication and brings down
[CodeClimate](https://codeclimate.com/github/kiwitcms/Kiwi) metrics
to 26.9% of technical debt or 10 months to fix.

We've pushed the new `kiwitcms/kiwi` docker image to Docker Hub and updated the
demo instance at <https://demo.kiwitcms.org>. Starting forward the demo will use
the `info-at-kiwitcms.org` email address for all communication sent. There are real
people behind this address so if you write to us we will reply!


Changes since Kiwi TCMS 4.1.0
------------------------------

### Enhancements

- Upgrade to [Django 2.0.3](https://docs.djangoproject.com/en/2.0/releases/2.0.3/)
- Show `date_joined` column for user admin
- Expose httpd logs to the host running docker. Fixes
  [Issue #191](https://github.com/kiwitcms/Kiwi/issues/191)


### Bug fixes

- Move SSL keys under common directory in the container. Fixes
  [Issue #231](https://github.com/kiwitcms/Kiwi/issues/231)
- Always select active builds for TestRun. Fixes
  [Issue #245](https://github.com/kiwitcms/Kiwi/issues/245)
- Swap `escape` and `escapejs` filters. Fixes
  [Issue #234](https://github.com/kiwitcms/Kiwi/issues/234)
- Globally disable `delete_selected` action in Admin, this removes the
  drop down selection widget! Fixes
  [Issue #221](https://github.com/kiwitcms/Kiwi/issues/221)
- Fix error in TestCase view when `from_plan` is empty string. Fixes
  [Sentry KIWI-TCMS-Z](https://sentry.io/open-technologies-bulgaria-ltd/kiwi-tcms/issues/474369640/)
- Fix sorting issue when None is compared to int. Fixes
  [Sentry KIWI-TCMS-V](https://sentry.io/open-technologies-bulgaria-ltd/kiwi-tcms/issues/473996504/)
- Validate form field as integer, not char. Fixes
  [Sentry KIWI-TCMS-W](https://sentry.io/open-technologies-bulgaria-ltd/kiwi-tcms/issues/474058623/)
- [docs] Remove information about importing test cases via XML. This functionality
  was removed in version 3.49


### Refactoring

- Refactor inner class `CaseActions`. Fixes
  [Issue #21](https://github.com/kiwitcms/Kiwi/issues/21) (Chenxiong Qi)
- Only use `get_cases.html` template. Fixes
  [Issue #176](https://github.com/kiwitcms/Kiwi/issues/176)
- Unify `get_details_review.html` and `get_details.html` templates
- Remove internal `Prompt.render` class and replace with Django messages
- Remove `mail/delete_plan.txt` template
- Remove `handle_emails_pre_plan_delete` signal handler
- Remove the `Export` button from TestPlan view, use Case->Export sub-menu
  item in the Cases tab. Also remove the export buttons from search and advanced
  search result templates. If you'd like to export the cases from a given
  plan you have to open it in a new browser window and use the menu
- Remove the `Print` button from plan search form
- Remove TestRun cloning from search results and plan details, use sub-menu
- Remove unnecessary JavaScript handling for `EnvGroup` edit view


### Settings

- Remove `PLAN_DELELE_EMAIL_TEMPLATE` setting (not used)


### Models and database migrations

- Use Django's own `DurationField`, instead of custom one. Fixes
  [Issue #183](https://github.com/kiwitcms/Kiwi/issues/183)

API clients must now send values for `estimated_time` which must be in a
format that `parse_duration()` understands, for example 'DD HH:MM:SS'! See
<https://docs.djangoproject.com/en/2.0/ref/utils/#django.utils.dateparse.parse_duration>


**IMPORTANT:** this release introduces new database migrations!

### Translations

There are new translatable strings introduced with this release! At this moment
translating Kiwi TCMS in languages other than English is purely a
community effort. If you'd like to help consult our
[translations contribution page](http://kiwitcms.readthedocs.io/en/latest/contribution.html#translation).


How to upgrade
---------------

If you are using Kiwi TCMS as a Docker container then

    cd Kiwi/
    docker-compose down
    docker pull kiwitcms/kiwi
    docker pull centos/mariadb
    docker-compose up -d
    docker exec -it kiwi_web /Kiwi/manage.py migrate


Help us make Kiwi TCMS better
-----------------------------

According to [our 2018 roadmap]({filename}2018-01-22-milestones.markdown) the
Kiwi TCMS team is investing a great deal of our time to make the code base more
maintainable! For the past few releases we've been balancing code refactoring
with bug-fixing and minor enhancements and we have lots of ideas down the line.

We want to hear your voice! Tell us how you use Kiwi TCMS inside your organization.
We want to know what works for you and what doesn't so we can make it better. Feel
free to comment below, file GitHub issues or send us an email.


Happy testing!
