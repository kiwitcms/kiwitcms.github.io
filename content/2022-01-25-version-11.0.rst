Kiwi TCMS 11.0
##############

:headline: improvements, new features, bug-fixes and more
:date: 2022-01-25 10:00
:comments: true
:tags: releases


We're happy to announce Kiwi TCMS version 11.0.

**IMPORTANT:**
This is a new major release which contains security related updates, several improvements,
API changes, bug fixes and new translations!

You can explore everything at
`https://public.tenant.kiwitcms.org <https://public.tenant.kiwitcms.org/>`_!


    Supported upgrade paths::
    
        5.3   (or older) -> 5.3.1
        5.3.1 (or newer) -> 6.0.1
        6.0.1            -> 6.1
        6.1              -> 6.1.1
        6.1.1            -> 6.2 (or newer)

---

    Container images::
    
        kiwitcms/kiwi       latest  6600bc56a544    622 MB
        kiwitcms/kiwi       6.2     7870085ad415    957 MB
        kiwitcms/kiwi       6.1.1   49fa42ddfe4d    955 MB
        kiwitcms/kiwi       6.1     b559123d25b0    970 MB
        kiwitcms/kiwi       6.0.1   87b24d94197d    970 MB
        kiwitcms/kiwi       5.3.1   a420465852be    976 MB

**IMPORTANT:** version tagged
`container <{filename}pages/containers.markdown>`_ images are available only to
`subscribers </#subscriptions>`_!


Changes since Kiwi TCMS 10.5
----------------------------

Improvements
~~~~~~~~~~~~

- Update Django to 3.2.11
- Update django-colorfield from 0.4.5 to 0.6.3
- Update django-grappelli from 2.15.3 to 3.0.2
- Update psycopg2 from 2.9.2 to 2.9.3
- Update pygments from 2.10.0 to 2.11.2
- Update python-gitlab from 2.10.1 to 3.1.0
- Update node_modules/prismjs from 1.25.0 to 1.26.0
- Update node_modules/marked from 2.1.3 to 4.0.10
- Admin panel now allows to view, add, edit and delete Environment records
- Allow selection of environment when creating new TestRun and display the chosen
  values inside the TestRun page. Closes
  `Issue #1344 <https://github.com/kiwitcms/Kiwi/issues/1344>`_
- Creating a TestRun will now generate test execution matrix based on the available
  environment and test case properties. Closes
  `Issue #1843 <https://github.com/kiwitcms/Kiwi/issues/1843>`_
- When generating a test execution matrix the supported algorithms are
  "full" and "pairwise". Closes
  `Issue #1931 <https://github.com/kiwitcms/Kiwi/issues/1931>`_

  - Feature is enabled for test runs which contain test cases. This
    feature is not shown when creating an empty test run
  - This feature isn't supported when subsequently adding new test cases
    to test run
- Record a random hex number under ``/Kiwi/uploads/installation-id``


Detailed information about properties, environments and test matrix generation
can be found
`in a separate article <{filename}2022-01-24-feature-environment-and-properties.markdown>`_.


Database
~~~~~~~~

- New model ``testrun.Environment``
- New model ``testrun.EnvironmentProperty``
- New model ``testrun.Property``

**Warning:**

    These newly added models create additional permission labels with names
    *testruns | environment | Can .... environment*,
    *testruns | property | Can .... property*,
    *testruns | environment property | Can .... environment property*

    Execute ``manage.py refresh_permissions`` and/or assign them manually to
    users and groups if they should be able to interact with the new objects!


Settings
~~~~~~~~

- Update the value of ``MODERNRPC_METHODS_MODULES`` setting to include
  modules with the new API methods


API
~~~

- Method ``TestRun.add_case`` will now return a list.

  .. warning::

    This breaks API compatibility with older versions and will break
    all plugins which rely on this method. Use plugins v11 or greater!
- Method ``TestRun.add_case`` return value will now include a field named
  ``properties``
- New methods ``Environment.properties``, ``Environment.add_property`` and
  ``Environment.remove_property``
- New method ``TestRun.properties``


Bug fixes
~~~~~~~~~

- Send e-mail notification when adding comments to bugs. Fixes
  `Issue #2232 <https://github.com/kiwitcms/Kiwi/issues/2232>`_ (@cmbahadir)
- Disable the "+" button when there is no related element selected. Fixes
  `Issue #2561 <https://github.com/kiwitcms/Kiwi/issues/2561>`_ (@cmbahadir)
- When cloning test plans keep the existing test case sort order inside
  the resulting test plan. Fixes
  `Issue #2218 <https://github.com/kiwitcms/Kiwi/issues/2218>`_ (Nicolas Gelot)
- Configure en_US.UTF-8 locale inside container. Allows upload of files with
  unicode names. Fixes
  `Issue #2600 <https://github.com/kiwitcms/Kiwi/issues/2600>`_


Refactoring and testing
~~~~~~~~~~~~~~~~~~~~~~~

- Refresh logo design
- Pylint fixes
- Pin setuptools b/c of problem with django-extensions
- Remove redundant test scenario
- Shell script refactoring


Translations
~~~~~~~~~~~~

- Updated `Chinese Simplified translation <https://crowdin.com/project/kiwitcms/zh-CN#>`_
- Updated `Chinese Traditional translation <https://crowdin.com/project/kiwitcms/zh-TW#>`_
- Updated `French translation <https://crowdin.com/project/kiwitcms/fr#>`_
- Updated `Hebrew translation <https://crowdin.com/project/kiwitcms/he#>`_
- Updated `Slovenian translation <https://crowdin.com/project/kiwitcms/sl#>`_


Kiwi TCMS Enterprise v11.0-mt
-----------------------------

- Based on Kiwi TCMS v11.0
- Update kiwitcms-tenants from 1.8.0 to 1.11.0


    Private images::
    
        quay.io/kiwitcms/enterprise         11.0-mt         a730291750f8   846 MB
        quay.io/kiwitcms/version            11.0            6600bc56a544   622 MB



**IMPORTANT:** version tagged and Enterprise
`container <{filename}pages/containers.markdown>`_ images are available only to
`subscribers </#subscriptions>`_!


How to upgrade
---------------

`Backup <{filename}2018-07-30-docker-backup.markdown>`_ first!
Then execute the commands::

    cd path/containing/docker-compose/
    docker-compose down
    docker-compose pull
    docker-compose up -d
    docker exec -it kiwi_web /Kiwi/manage.py migrate

Refer to
`our documentation <https://kiwitcms.readthedocs.io/en/latest/installing_docker.html#upgrading>`_
for more details!

Happy testing!

---

If you like what we're doing and how Kiwi TCMS supports various communities
please help us!

- `Give ‚≠ê on GitHub <https://github.com/kiwitcms/Kiwi/stargazers>`_;
- `Give üëç on GitLab <https://gitlab.com/gitlab-org/gitlab/-/issues/334558>`_;
- `Donate via Open Collective <https://opencollective.com/kiwitcms/donate>`_ as low as 1 EUR;
- `Join our newsletter <https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&id=c970a37581>`_
  and follow all project news;
- `Become a contributor <https://kiwitcms.readthedocs.io/en/latest/contribution.html>`_
  and an awesome open source hacker;
- `Become a subscriber </#subscriptions>`_ and help us sustain development
