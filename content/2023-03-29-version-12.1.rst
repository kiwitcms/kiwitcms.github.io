Kiwi TCMS 12.1
##############

:headline: security updates, improvements, bug fixes and new translations
:date: 2023-03-29 23:00
:comments: true
:tags: releases


We're happy to announce Kiwi TCMS version 12.1!

**IMPORTANT:** this is a minor release which contains security related updates,
general improvements, bug fixes and new translations!

You can explore everything at
`https://public.tenant.kiwitcms.org <https://public.tenant.kiwitcms.org/>`_!


    Supported upgrade paths::

        5.3   (or older) -> 5.3.1
        5.3.1 (or newer) -> 6.0.1
        6.0.1            -> 6.1
        6.1              -> 6.1.1
        6.1.1            -> 6.2 (or newer)

---

    Upstream container images (x86_64)::

        pub.kiwitcms.eu/kiwitcms/kiwi   latest  590c0cd6f25f    521MB


**IMPORTANT:** version tagged and multi-arch
`container <{filename}pages/containers.markdown>`_ images are available only to
`subscribers </#subscriptions>`_!


Changes since Kiwi TCMS 12.0
----------------------------

Security
~~~~~~~~

- Add the ``Content-Security-Policy`` header to block inline JavaScript. Fixes
  `CVE-2023-27489 <https://github.com/kiwitcms/Kiwi/security/advisories/GHSA-2wcr-87wf-cf9j>`_
- Add the ``X-Frame-Options`` header to deny loading Kiwi TCMS into an iframe
- Add the ``X-Content-Type-Options`` header


Improvements
~~~~~~~~~~~~

- Update django-grappelli from 3.0.4 to 3.0.5
- Update django-simple-history from 3.2.0 to 3.3.0
- Update jira from 3.4.1 to 3.5.0
- Update markdown from 3.4.1 to 3.4.3
- Update pygithub from 1.57 to 1.58.1
- Update tzdata from 2022.7 to 2023.3
- Do not allow last super-user to be deleted (Ivajlo Karabojkov)
- Improve loading time on test runs pages which have large number of
  executions with components, parameters and/or tags (@somenewacc)
- Expose all RPC methods in the documentation
- Update documentation to describe transitions for TestRun statuses. Closes
  `Issue #3124 <https://github.com/kiwitcms/Kiwi/issues/3124>`_


Settings
~~~~~~~~

- Allow uWSGI configuration override via the file
  ``/Kiwi/etc/uwsgi.override``


API
~~~

- New API method ``TestRun.add_attachment`` (David M. Johnson)
- New API method ``Environment.filter()`` method. Refs
  `Issue #3034 <https://github.com/kiwitcms/Kiwi/issues/3034>`_ (@somenewacc)
- New API method ``Environment.create()``. Closes
  `Issue #3034 <https://github.com/kiwitcms/Kiwi/issues/3034>`_ (@somenewacc)


Bug fixes
~~~~~~~~~

- Fix /admin/testcases/template/ page not being able to render the text editor


Refactoring
~~~~~~~~~~~

- Refactor bugtracker integration
- Remove unnecessary onChanged function for DurationWidget
- Refactoring to avoid inline ``<script>`` tags


Translations
~~~~~~~~~~~~

- Enable translation integration on Admin pages
- Updated `Bulgarian translation <https://crowdin.com/project/kiwitcms/bg#>`_
- Updated `French translation <https://crowdin.com/project/kiwitcms/fr#>`_
- Updated `Slovenian translation <https://crowdin.com/project/kiwitcms/sl#>`_


Kiwi TCMS Enterprise v12.1-mt
-----------------------------

- Based on Kiwi TCMS v12.1
- Update dj-database-url from 1.2.0 to 1.3.0
- Update kiwitcms-github-app from 1.4.1 to 1.5.1
- Update kiwitcms-trackers-integration from 0.3.0 to 0.4.0
- Add test for missing migrations

    Private images::

        hub.kiwitcms.eu/kiwitcms/version            12.1 (aarch64)          571870729367    29 Mar 2023     528MB
        hub.kiwitcms.eu/kiwitcms/version            12.1 (x86_64)           590c0cd6f25f    29 Mar 2023     520MB
        hub.kiwitcms.eu/kiwitcms/enterprise         12.1-mt (aarch64)       0a1e2f092351    29 Mar 2023     734MB
        hub.kiwitcms.eu/kiwitcms/enterprise         12.1-mt (x86_64)        9f44aaab7646    29 Mar 2023     725MB

**IMPORTANT:** version tagged, multi-arch and Enterprise
`container <{filename}pages/containers.markdown>`_ images are available only to
`subscribers </#subscriptions>`_!


How to upgrade
---------------

`Backup <{filename}2018-07-30-docker-backup.markdown>`_ first!
Then execute the commands::

    cd path/containing/docker-compose/
    docker-compose down
    docker-compose pull
    docker-compose up -d
    docker exec -it kiwi_web /Kiwi/manage.py upgrade

Refer to
`our documentation <https://kiwitcms.readthedocs.io/en/latest/installing_docker.html#upgrading>`_
for more details!

Happy testing!

---

If you like what we're doing and how Kiwi TCMS supports various communities
please help us grow!

- `Give ‚≠ê on GitHub <https://github.com/kiwitcms/Kiwi/stargazers>`_;
- `Give üëç on GitLab <https://gitlab.com/gitlab-org/gitlab/-/issues/334558>`_;
- `Donate via Open Collective <https://opencollective.com/kiwitcms/donate>`_ as low as 1 EUR;
- `Join our newsletter <https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&id=c970a37581>`_
  and follow all project news;
- `Become a contributor <https://kiwitcms.readthedocs.io/en/latest/contribution.html>`_
  and an awesome open source hacker;
- `Become a subscriber </#subscriptions>`_ and help us sustain development
