Kiwi TCMS 6.2
#############

:headline: new Django, database migrations and few improvements
:date: 2018-11-02 12:15
:comments: true
:og_image: images/openfest2018_banner.png
:twitter_image: images/openfest2018_banner.png


We're happy to announce Kiwi TCMS version 6.2! This is a small release
that removes squashed migrations from previous releases and includes a few
improvements. You can explore everything at
`https://demo.kiwitcms.org <https://demo.kiwitcms.org/login/github/>`_ or
find our info booth at `OpenFest <http://www.openfest.org>`_ in Sofia during
the weekend and do a live demo with the team!

Supported upgrade paths::

    5.3   (or older) -> 5.3.1
    5.3.1 (or newer) -> 6.0.1
    6.0.1            -> 6.1
    6.1              -> 6.1.1
    6.1.1            -> 6.2 (latest)


Docker images::

    kiwitcms/kiwi       latest  7870085ad415    957.6 MB
    kiwitcms/kiwi       6.2     7870085ad415    957.6 MB
    kiwitcms/kiwi       6.1.1   49fa42ddfe4d    955.7 MB
    kiwitcms/kiwi       6.1     b559123d25b0    970.2 MB
    kiwitcms/kiwi       6.0.1   87b24d94197d    970.1 MB
    kiwitcms/kiwi       5.3.1   a420465852be    976.8 MB



Changes since Kiwi TCMS 6.1.1
-----------------------------


Improvements
~~~~~~~~~~~~

- Update to `Django 2.1.3 <https://docs.djangoproject.com/en/2.1/releases/2.1.3/>`_
- Update Apache config to print logs on the console. Fixes
  `Issue #549 <https://github.com/kiwitcms/Kiwi/issues/549>`_
- `https://demo.kiwitcms.org <https://demo.kiwitcms.org/login/github/>`_ now
  allows email associations when logging via GitHub. If you have an existing
  account which shares the same email address with your GitHub profile you
  will be redirected to that account upon logging in via GitHub!
  This also resolves a problem where existing users trying to login via GitHub
  were presented with error message that their email exists in the database!
  Fixes
  `Issue #573 <https://github.com/kiwitcms/Kiwi/issues/573>`_


Database
~~~~~~~~

- Remove old variants of squashed migrations from earlier releases


Translations
~~~~~~~~~~~~

- Updated `German translation <https://crowdin.com/project/kiwitcms/de#>`_


Refactoring
~~~~~~~~~~~

- Update ``tcms.tests.factories.BugFactory`` (Ivaylo Ivanov)
- Add test for ``tcms.testcases.views.group_case_bugs`` (Ivaylo Ivanov)
- Pylint fixes (Ivaylo Ivanov)
- Remove unused JavaScript and re-use the existing JSON RPC methods



How to upgrade
---------------

If you are using Kiwi TCMS as a Docker container then::

    cd Kiwi/
    git pull
    docker-compose down
    docker pull kiwitcms/kiwi
    docker pull centos/mariadb
    docker-compose up -d
    docker exec -it kiwi_web /Kiwi/manage.py migrate

Don't forget to `backup <{filename}2018-07-30-docker-backup.markdown>`_
before upgrade!

**WARNING:** ``kiwitcms/kiwi:latest`` and ``docker-compose.yml`` will
always point to the latest available version! If you have to upgrade in steps,
e.g. between several intermediate releases, you have to modify the above workflow::

    # starting from an older Kiwi TCMS version
    docker-compose down
    docker pull kiwitcms/kiwi:<next_upgrade_version>
    edit docker-compose.yml to use kiwitcms/kiwi:<next_upgrade_version>
    docker-compose up -d
    docker exec -it kiwi_web /Kiwi/manage.py migrate
    # repeat until you have reached latest


Subscription based online service
---------------------------------

We are planning to convert
`https://demo.kiwitcms.org <https://demo.kiwitcms.org/login/github/>`_ into
a subscription based service for people who don't want to bother installing
Kiwi TCMS on their own systems and just want to use it for test collaboration
with their team.

The income from this service will go towards covering operating costs and
supporting the
`development team <{filename}pages/team.html>`_. Watch this
blog for further announcements about this. Meanwhile you may share your
thoughts via
`Issue #515 <https://github.com/kiwitcms/Kiwi/issues/515>`_.


Plans to remove deprecated functionality
----------------------------------------

``TestRun.product_version`` will be removed from the database schema in favor of
``TestRun.plan.product_version``! With the latest web interface it is not possible
to select a product version different than the one selected in the Test Plan.
Test runs should only be able to select product builds (after
`Issue #246 <https://github.com/kiwitcms/Kiwi/issues/246>`_ is fixed).
